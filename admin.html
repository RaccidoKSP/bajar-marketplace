<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤ - BAJAR</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon.png">
    <link rel="shortcut icon" href="favicon.ico">
    
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>üõí BAJAR ‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤</h1>
                    <p class="tagline">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</p>
                </div>
                <nav class="nav">
                    <button class="btn-primary" id="adminPostAdBtn">+ ‡§®‡§Ø‡§æ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>
                    <button class="btn-secondary" onclick="window.location.href='index.html'">‚Üê ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç</button>
                    <button class="btn-danger" id="clearAllBtn">üóëÔ∏è ‡§∏‡§≠‡•Ä ‡§π‡§ü‡§æ‡§è‡§Ç</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Admin Content -->
    <section class="admin-content">
        <div class="container">
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalAds">0</div>
                    <div class="stat-label">‡§ï‡•Å‡§≤ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§®</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayAds">0</div>
                    <div class="stat-label">‡§Ü‡§ú ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="categoriesCount">0</div>
                    <div class="stat-label">‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç</div>
                </div>
            </div>

            <div class="admin-controls">
                <div class="search-filter">
                    <input type="text" id="adminSearch" class="admin-search" placeholder="üîç ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•á‡§Ç...">
                    <select id="categoryFilter" class="category-filter">
                        <option value="">‡§∏‡§≠‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç</option>
                        <option value="electronics">‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏</option>
                        <option value="fashion">‡§´‡•à‡§∂‡§®</option>
                        <option value="vehicles">‡§µ‡§æ‡§π‡§®</option>
                        <option value="real-estate">‡§Ö‡§ö‡§≤ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø</option>
                    </select>
                    <select id="sortBy" class="sort-filter">
                        <option value="newest">‡§™‡§π‡§≤‡•á ‡§®‡§è</option>
                        <option value="oldest">‡§™‡§π‡§≤‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á</option>
                        <option value="price-low">‡§ï‡•Ä‡§Æ‡§§: ‡§ï‡§Æ ‡§∏‡•á ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ</option>
                        <option value="price-high">‡§ï‡•Ä‡§Æ‡§§: ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§∏‡•á ‡§ï‡§Æ</option>
                    </select>
                </div>
            </div>

            <div class="ads-table-container">
                <table class="ads-table" id="adsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>‡§ö‡§ø‡§§‡•ç‡§∞</th>
                            <th>‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï</th>
                            <th>‡§∂‡•ç‡§∞‡•á‡§£‡•Ä</th>
                            <th>‡§ï‡•Ä‡§Æ‡§§</th>
                            <th>‡§µ‡•ç‡§Ø‡•Ç‡§ú</th>
                            <th>‡§∏‡•ç‡§•‡§ø‡§§‡§ø</th>
                            <th>‡§∏‡•ç‡§•‡§æ‡§®</th>
                            <th>‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ</th>
                            <th>‡§§‡§æ‡§∞‡•Ä‡§ñ</th>
                            <th>‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç</th>
                        </tr>
                    </thead>
                    <tbody id="adsTableBody">
                        <!-- Ads will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h3>‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç</h3>
            <p id="deleteMessage">‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?</p>
            <div class="modal-actions">
                <button class="btn-danger" id="confirmDeleteBtn">‡§π‡§æ‡§Ç, ‡§π‡§ü‡§æ‡§è‡§Ç</button>
                <button class="btn-secondary" id="cancelDeleteBtn">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        </div>
    </div>

    <!-- Edit Item Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content modal-large">
            <span class="close-modal" onclick="closeEditModal()">&times;</span>
            <h3>‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç</h3>
            <form id="editItemForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editTitle">‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï *</label>
                        <input type="text" id="editTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="editCategory">‡§∂‡•ç‡§∞‡•á‡§£‡•Ä *</label>
                        <select id="editCategory" required>
                            <option value="electronics">‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏</option>
                            <option value="fashion">‡§´‡•à‡§∂‡§®</option>
                            <option value="vehicles">‡§µ‡§æ‡§π‡§®</option>
                            <option value="real-estate">‡§Ö‡§ö‡§≤ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editPrice">‡§ï‡•Ä‡§Æ‡§§ (‚Çπ) *</label>
                        <input type="number" id="editPrice" required>
                    </div>
                    <div class="form-group">
                        <label for="editCondition">‡§∏‡•ç‡§•‡§ø‡§§‡§ø *</label>
                        <select id="editCondition" required>
                            <option value="new">‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§Ø‡§æ</option>
                            <option value="like-new">‡§®‡§è ‡§ú‡•à‡§∏‡§æ</option>
                            <option value="good">‡§Ö‡§ö‡•ç‡§õ‡§æ</option>
                            <option value="fair">‡§†‡•Ä‡§ï-‡§†‡§æ‡§ï</option>
                            <option value="poor">‡§™‡•Å‡§∞‡•ç‡§ú‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editSize">‡§Ü‡§ï‡§æ‡§∞ / ‡§Ü‡§Ø‡§æ‡§Æ</label>
                        <input type="text" id="editSize">
                    </div>
                    <div class="form-group">
                        <label for="editViews">‡§µ‡•ç‡§Ø‡•Ç‡§ú *</label>
                        <input type="number" id="editViews" min="0" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="editDescription">‡§µ‡§ø‡§µ‡§∞‡§£ *</label>
                    <textarea id="editDescription" rows="4" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editLocation">‡§∏‡•ç‡§•‡§æ‡§® *</label>
                        <input type="text" id="editLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="editSeller">‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ *</label>
                        <input type="text" id="editSeller" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="editPhone">‡§´‡•ã‡§® *</label>
                    <input type="tel" id="editPhone" required>
                </div>

                <input type="hidden" id="editItemId">

                <div class="modal-actions">
                    <button type="submit" class="btn-primary">‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§∏‡§π‡•á‡§ú‡•á‡§Ç</button>
                    <button type="button" class="btn-secondary" onclick="closeEditModal()">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Post Ad Modal (–¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏) -->
    <div class="modal" id="postAdModal">
        <div class="modal-content modal-large">
            <span class="close-modal" onclick="document.getElementById('postAdModal').style.display='none'">&times;</span>
            <h3>+ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
            <form id="postAdForm">
                <div class="form-group">
                    <label for="itemTitle">‡§µ‡§∏‡•ç‡§§‡•Å ‡§ï‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï * <span style="color: #FF6B35; font-size: 0.85em;">üåê ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ‡•á‡§Ç</span></label>
                    <input type="text" id="itemTitle" required placeholder="Example: iPhone 13 Pro">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="itemCategory">‡§∂‡•ç‡§∞‡•á‡§£‡•Ä *</label>
                        <select id="itemCategory" required>
                            <option value="">‡§è‡§ï ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                            <option value="electronics">‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏</option>
                            <option value="fashion">‡§´‡•à‡§∂‡§®</option>
                            <option value="vehicles">‡§µ‡§æ‡§π‡§®</option>
                            <option value="real-estate">‡§Ö‡§ö‡§≤ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="itemPrice">‡§ï‡•Ä‡§Æ‡§§ (‚Çπ) *</label>
                        <input type="number" id="itemPrice" required placeholder="‡§∞‡•Å‡§™‡§Ø‡•á ‡§Æ‡•á‡§Ç">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="itemCondition">‡§∏‡•ç‡§•‡§ø‡§§‡§ø *</label>
                        <select id="itemCondition" required>
                            <option value="">‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                            <option value="new">‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§®‡§Ø‡§æ</option>
                            <option value="like-new">‡§®‡§è ‡§ú‡•à‡§∏‡§æ</option>
                            <option value="good">‡§Ö‡§ö‡•ç‡§õ‡§æ</option>
                            <option value="fair">‡§†‡•Ä‡§ï-‡§†‡§æ‡§ï</option>
                            <option value="poor">‡§™‡•Å‡§∞‡•ç‡§ú‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="itemSize">‡§Ü‡§ï‡§æ‡§∞ / ‡§Ü‡§Ø‡§æ‡§Æ *</label>
                        <input type="text" id="itemSize" required placeholder="‡§â‡§¶‡§æ., ‡§¨‡§°‡§º‡§æ, 42 ‡§á‡§Ç‡§ö">
                    </div>
                </div>

                <div class="form-group">
                    <label for="itemDescription">‡§µ‡§ø‡§µ‡§∞‡§£ * <span style="color: #FF6B35; font-size: 0.85em;">üåê ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç</span></label>
                    <textarea id="itemDescription" required rows="5"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="itemLocation">‡§∏‡•ç‡§•‡§æ‡§® * <span style="color: #FF6B35; font-size: 0.85em;">üåê ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç</span></label>
                        <input type="text" id="itemLocation" required placeholder="Mumbai">
                    </div>

                    <div class="form-group">
                        <label for="sellerName">‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ *</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="sellerName" required placeholder="‡§®‡§æ‡§Æ" style="flex: 1;">
                            <button type="button" onclick="autoFillSellerName()" class="btn-secondary" style="white-space: nowrap;">üé≤ ‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ</button>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="sellerPhone">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§®‡§Ç‡§¨‡§∞ *</label>
                        <input type="tel" id="sellerPhone" required placeholder="+92 022 #####">
                    </div>

                    <div class="form-group">
                        <label for="itemViews">‡§µ‡•ç‡§Ø‡•Ç‡§ú ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ *</label>
                        <input type="number" id="itemViews" min="0" value="0" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="itemImages">‡§ö‡§ø‡§§‡•ç‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (1-5 ‡§´‡•ã‡§ü‡•ã) *</label>
                    <input type="file" id="itemImages" accept="image/*" multiple required>
                    <small>‡§Ö‡§™‡§®‡•Ä ‡§µ‡§∏‡•ç‡§§‡•Å ‡§ï‡•Ä 1 ‡§∏‡•á 5 ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞‡•á‡§Ç ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</small>
                    <div id="imagePreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="submit" class="btn-primary">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                    <button type="button" class="btn-secondary" onclick="document.getElementById('postAdModal').style.display='none'">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
            </form>
        </div>
    </div>

    <script src="api-client.js"></script>
    <script src="translate-service.js"></script>
    <script src="indian-names.js"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ script.js –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–æ—Ä–º—ã -->
    <script>
        // –ö–æ–ø–∏—Ä—É–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ script.js
        
        // Handle image preview
        function handleImagePreview(e) {
            const files = e.target.files;
            const previewContainer = document.getElementById('imagePreview');
            previewContainer.innerHTML = '';
            
            if (files.length > 5) {
                alert('‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ 5 ‡§´‡•ã‡§ü‡•ã! ‡§ï‡•á‡§µ‡§≤ ‡§™‡§π‡§≤‡•á 5 ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§');
            }
            
            const filesToShow = Math.min(files.length, 5);
            
            for (let i = 0; i < filesToShow; i++) {
                const file = files[i];
                const reader = new FileReader();
                reader.onload = function(event) {
                    const imgContainer = document.createElement('div');
                    imgContainer.style.cssText = 'display: inline-block; margin: 5px; position: relative;';
                    imgContainer.innerHTML = `
                        <img src="${event.target.result}" alt="Preview ${i + 1}" style="max-width: 150px; max-height: 150px; border-radius: 8px; object-fit: cover; border: 2px solid #E0E0E0;">
                        <div style="position: absolute; top: 5px; left: 5px; background: ${i === 0 ? '#FF6B35' : '#27AE60'}; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: bold;">
                            ${i === 0 ? '‡§Æ‡•Å‡§ñ‡•ç‡§Ø' : `‡§´‡•ã‡§ü‡•ã ${i + 1}`}
                        </div>
                    `;
                    previewContainer.appendChild(imgContainer);
                };
                reader.readAsDataURL(file);
            }
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: #27AE60;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Handle post ad form submission
        async function handlePostAd(e) {
            e.preventDefault();
            
            showNotification('‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç ‚è≥');
            
            try {
                const title = document.getElementById('itemTitle').value;
                const description = document.getElementById('itemDescription').value;
                const location = document.getElementById('itemLocation').value;
                const seller = document.getElementById('sellerName').value;
                
                showNotification('‡§™‡§æ‡§† ‡§ï‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... ‚è≥');
                
                const [translatedTitle, translatedDescription, translatedLocation, translatedSeller] = await Promise.all([
                    TranslationService.translateToHindi(title),
                    TranslationService.translateToHindi(description),
                    TranslationService.translateToHindi(location),
                    TranslationService.translateToHindi(seller)
                ]);
                
                showNotification('‡§ö‡§ø‡§§‡•ç‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç... ‚è≥');
                
                const imageFiles = document.getElementById('itemImages').files;
                let imageUrls = [];
                
                if (imageFiles.length > 0) {
                    const filesToProcess = Math.min(imageFiles.length, 5);
                    const filesToUpload = Array.from(imageFiles).slice(0, filesToProcess);
                    
                    try {
                        imageUrls = await APIClient.uploadImages(filesToUpload);
                    } catch (error) {
                        console.error('Error uploading images:', error);
                        showNotification('‡§ö‡§ø‡§§‡•ç‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
                        return;
                    }
                } else {
                    const category = document.getElementById('itemCategory').value;
                    const icons = {
                        'electronics': 'üì±',
                        'fashion': 'üëó',
                        'vehicles': 'üöó',
                        'real-estate': 'üèòÔ∏è'
                    };
                    imageUrls.push(icons[category] || 'üì¶');
                }
                
                const newItemData = {
                    title: translatedTitle,
                    category: document.getElementById('itemCategory').value,
                    price: parseInt(document.getElementById('itemPrice').value),
                    condition: document.getElementById('itemCondition').value,
                    size: document.getElementById('itemSize').value,
                    description: translatedDescription,
                    location: translatedLocation,
                    seller: translatedSeller,
                    phone: document.getElementById('sellerPhone').value,
                    views: parseInt(document.getElementById('itemViews').value) || 0,
                    image: imageUrls[0],
                    imageFiles: imageUrls,
                    originalTitle: title,
                    originalDescription: description,
                    originalLocation: location,
                    originalSeller: seller
                };
                
                const newItem = await APIClient.createItem(newItemData);
                
                document.getElementById('postAdModal').style.display = 'none';
                document.getElementById('postAdForm').reset();
                document.getElementById('imagePreview').innerHTML = '';
                
                showNotification('‡§Ü‡§™‡§ï‡§æ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! üéâ');
                
                // Reload ads in admin panel
                if (typeof loadAds === 'function') {
                    setTimeout(() => loadAds(), 1000);
                }
                
            } catch (error) {
                console.error('Error creating item:', error);
                showNotification('‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
            }
        }
        
        // Setup event listeners when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Post Ad Button
            document.getElementById('adminPostAdBtn').addEventListener('click', () => {
                document.getElementById('postAdModal').style.display = 'block';
                
                const phoneInput = document.getElementById('sellerPhone');
                if (!phoneInput.value) {
                    phoneInput.value = '+92 022 #####';
                }
                
                const locationInput = document.getElementById('itemLocation');
                if (!locationInput.value) {
                    const indianCities = ['Mumbai', 'Delhi', 'Bangalore', 'Kolkata', 'Chennai', 'Hyderabad', 'Pune'];
                    const randomCity = Math.random() < 0.8 ? 'Mumbai' : indianCities[Math.floor(Math.random() * indianCities.length)];
                    locationInput.value = randomCity;
                }
                
                if (typeof autoFillSellerName === 'function') {
                    autoFillSellerName();
                }
            });
            
            // Form submit
            document.getElementById('postAdForm').addEventListener('submit', handlePostAd);
            
            // Image preview
            const imageInput = document.getElementById('itemImages');
            if (imageInput) {
                imageInput.addEventListener('change', handleImagePreview);
            }
        });
    </script>
    
    <script src="admin.js"></script>
</body>
</html>
